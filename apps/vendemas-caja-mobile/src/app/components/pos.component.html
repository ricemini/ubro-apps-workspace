<div class="pos-container">
  <div class="header">
    <h1>VendemÃ¡s POS - Caja Web</h1>
    <div class="cart-info">
      <span>Items: {{ posService.cartItemCount() }}</span>
      <span>Total: ${{ posService.cartTotal() }}</span>
      <button (click)="posService.toggleDrawer()" class="cart-button">
        ðŸ›’ Cart
      </button>
    </div>
  </div>

  <div class="main-content">
    <div class="products-grid">
      <h2>Products</h2>
      <div class="products">
        @for (product of posService.products(); track product.id) {
          <div class="product-card" [class.low-stock]="product.stock < 10">
            <h3>{{ product.name }}</h3>
            <p class="price">${{ product.price }}</p>
            <p class="stock">Stock: {{ product.stock }}</p>
            <button
              (click)="posService.addToCart(product)"
              [disabled]="product.stock === 0"
              class="add-button"
            >
              Add to Cart
            </button>
          </div>
        }
      </div>
    </div>

    @if (posService.isOpen()) {
      <div class="cart-drawer">
        <div class="cart-header">
          <h2>Shopping Cart</h2>
          <button (click)="posService.closeDrawer()" class="close-button">
            Ã—
          </button>
        </div>

        @if (posService.cart().length === 0) {
          <p class="empty-cart">Cart is empty</p>
        } @else {
          <div class="cart-items">
            @for (item of posService.cart(); track item.product.id) {
              <div class="cart-item">
                <div class="item-info">
                  <h4>{{ item.product.name }}</h4>
                  <p>${{ item.product.price }} Ã— {{ item.quantity }}</p>
                </div>
                <div class="item-actions">
                  <button
                    (click)="updateQuantity(item.product.id, item.quantity - 1)"
                  >
                    -
                  </button>
                  <span>{{ item.quantity }}</span>
                  <button
                    (click)="updateQuantity(item.product.id, item.quantity + 1)"
                  >
                    +
                  </button>
                  <button
                    (click)="posService.removeFromCart(item.product.id)"
                    class="remove-button"
                  >
                    Remove
                  </button>
                </div>
              </div>
            }
          </div>

          <div class="cart-footer">
            <div class="total">
              <strong>Total: ${{ posService.cartTotal() }}</strong>
            </div>
            <div class="actions">
              <button (click)="posService.clearCart()" class="clear-button">
                Clear Cart
              </button>
              <button (click)="posService.checkout()" class="checkout-button">
                Checkout
              </button>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
